# 10. Jenkins. Start
----
### Setup Vagrant file
```
Vagrant.configure("2") do |config|
 	config.vm.box = "centos/7"
    config.vm.box_check_update = false
 	config.vm.define "jenkins"
    config.vm.network "private_network", ip: "192.168.1.13"
 	config.vm.provider :virtualbox do |vb|
 			vb.name = "jenkins"
 		end
 	end
```
### Create inventory file
```
vi inv.yaml
all_hosts:
         children:
           ec_htp:
             vars:
               full_name: "Educational Center of HTP"
             hosts:
               jump:
                 ansible_user: jump_sa
                 ansible_host: 178.124.206.48
               sa_centos:
                 ansible_user: vlepeshko
                 ansible_host: 192.168.254.50
               sa_ubuntu:
                 ansible_user: vlepeshko
                 ansible_host: 192.168.254.51
home_lab:
  vars:
    full_name: "home_labs"
  hosts:
    centos01:
      ansible_user: vlepeshko
      ansible_host: 192.168.1.11
    jenkins01:
      ansible_user: jenkins
      ansible_host: 192.168.1.14
    ubuntu01:
      ansible_user: vlepeshko
      ansible_host: 192.168.1.10
webservers:
  hosts:
    centos01:
    ubuntu01:
jenkins_ngix:
  hosts:
    jenkins01:

```
### Check Hosts availability
```
ansible jenkins_ngix -m ping -i inv.yaml                                                        
jenkins01 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    },
    "changed": false,
    "ping": "pong"
}

```
### Deployment of Nginx and Jenkins through Ansible
```
ansible-playbook -i inv.yaml -l jenkins_ngix jenkins.yaml                                       
PLAY [jenkins01] **********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ****************************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Install EPEL Repo] ****************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Nginx. Install packages] **********************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Copy conf file for Jenkins] *******************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Nginx. Enable and start servce] ***************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : SE Linux. Turn off] ***************************************************************************************************************************************************************************
changed: [jenkins01]

TASK [jenkins : Install yum] **********************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Download jenkins.repo] ************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Import Jenkins Key] ***************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Install Jenkins] ******************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Start & Enable Jenkins] ***********************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Sleep for 30 seconds and continue with play] **************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Get init password Jenkins] ********************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Print init password Jenkins] ******************************************************************************************************************************************************************
ok: [jenkins01] => {
    "result.stdout": "8ea9023155ad4f4abe98edaff09e0370"
}

TASK [jenkins : Creates directory Centos] *********************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Copy HTML for RedHat] *************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : Templates] ************************************************************************************************************************************************************************************
ok: [jenkins01]

TASK [jenkins : restart server] *******************************************************************************************************************************************************************************
changed: [jenkins01]

PLAY RECAP ****************************************************************************************************************************************************************************************************
jenkins01                  : ok=18   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
```
### Jenkinks web page
![](https://github.com/vlepeshko/test_github/blob/master/jenkins_screnshot.png?raw=true)
