ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ sudo lxc-create -t debian -f deb10.conf -n deb10 -- -r buster -a amd64
debootstrap is /usr/sbin/debootstrap
Checking cache download in /var/cache/lxc/debian/rootfs-buster-amd64 ... 
Copying rootfs to /var/lib/lxc/deb10/rootfs...Generating locales (this might take a while)...
  ru_RU.UTF-8... done
  ru_RU.UTF-8... done
Generation complete.
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
update-rc.d: error: cannot find a LSB script for checkroot.sh
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
update-rc.d: error: cannot find a LSB script for umountfs
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
Failed to disable unit, unit hwclock.sh.service does not exist.
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
update-rc.d: error: cannot find a LSB script for hwclockfirst.sh
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
Creating SSH2 RSA key; this may take some time ...
2048 SHA256:mx6W3qswtbVihsAtMLDsKE80knUIwbx8FipNTYc1MDg root@sm-debian (RSA)
Creating SSH2 ECDSA key; this may take some time ...
256 SHA256:OFA0/vYAnof3/CS7IoX7W5n2oyDE0E2rE/Q4rhSI0Mk root@sm-debian (ECDSA)
Creating SSH2 ED25519 key; this may take some time ...
256 SHA256:y2X+Suy/2xKsz2S/MsKTDfoLiK7VI7Q3wZbyel4Qf6c root@sm-debian (ED25519)
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").

Current default time zone: 'Etc/UTC'
Local time is now:      Fri Mar 13 14:17:41 UTC 2020.
Universal Time is now:  Fri Mar 13 14:17:41 UTC 2020.

ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ sudo lxc-start deb10  
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ sudo lxc-ls -f        
NAME  STATE   AUTOSTART GROUPS IPV4           IPV6 UNPRIVILEGED 
deb10 RUNNING 0         -      192.168.122.15 -    false        
ub18  STOPPED 0         -      -              -    false        
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ cat command.sh | sudo lxc-attach -n deb10 -- tee /root/command.sh
cat: command.sh: No such file or directory
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ cat create_insider_deb.sh | sudo lxc-attach -n deb10 -- tee /root/insider.sh          
apt update
apt install -yq sudo
useradd insider
echo "insider:lxc" | chpasswd -m
echo "insider   ALL=(ALL) NOPASSWD:ALL" | tee /etc/sudoers.d/insider
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ sudo lxc-attach -n deb10 -- sh /root/insider.sh
Get:1 http://security.debian.org buster/updates InRelease [65.4 kB]
Get:2 http://security.debian.org buster/updates/main amd64 Packages [182 kB]
Get:3 http://security.debian.org buster/updates/main Translation-en [96.0 kB]
Hit:4 http://deb.debian.org/debian buster InRelease             
Get:5 http://deb.debian.org/debian buster/main Translation-en [5970 kB]
Fetched 6313 kB in 8s (773 kB/s)                                                                                                                                                            
Reading package lists... Done
Building dependency tree... Done
All packages are up to date.
Reading package lists...
Building dependency tree...
The following NEW packages will be installed:
  sudo
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 1245 kB of archives.
After this operation, 3878 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian buster/main amd64 sudo amd64 1.8.27-1+deb10u2 [1245 kB]
Fetched 1245 kB in 0s (2607 kB/s)
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
        LANGUAGE = "en_US.UTF-8",
        LC_ALL = "en_US.UTF-8",
        LC_MONETARY = "ru_BY.UTF-8",
        LANG = "ru_RU.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to a fallback locale ("ru_RU.UTF-8").
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package sudo.
(Reading database ... 8757 files and directories currently installed.)
Preparing to unpack .../sudo_1.8.27-1+deb10u2_amd64.deb ...
Unpacking sudo (1.8.27-1+deb10u2) ...
Setting up sudo (1.8.27-1+deb10u2) ...
Processing triggers for systemd (241-7~deb10u3) ...
insider   ALL=(ALL) NOPASSWD:ALL
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ ssh insider@192.168.122.15
The authenticity of host '192.168.122.15 (192.168.122.15)' can't be established.
ECDSA key fingerprint is SHA256:OFA0/vYAnof3/CS7IoX7W5n2oyDE0E2rE/Q4rhSI0Mk.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '192.168.122.15' (ECDSA) to the list of known hosts.
insider@192.168.122.15's password: 
Linux deb10 4.19.0-8-amd64 #1 SMP Debian 4.19.98-1 (2020-01-26) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Could not chdir to home directory /home/insider: No such file or directory
$ whoami
insider
$ sudo apt update
Hit:1 http://security.debian.org buster/updates InRelease
Hit:2 http://deb.debian.org/debian buster InRelease
Reading package lists... Done
Building dependency tree       
Reading state information... Done
All packages are up to date.
$ exit                
Connection to 192.168.122.15 closed.
ppa@sm-debian:~/_labs/04.Infra/lxc/debian$ 
