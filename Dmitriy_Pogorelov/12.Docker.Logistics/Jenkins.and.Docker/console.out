Started by user Dmitriy Pogorelov
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/12.Docker.Logistics
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Clone repo)
[Pipeline] git
No credentials specified
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:dmpogorelov/dockerhub.git # timeout=10
Fetching upstream changes from git@github.com:dmpogorelov/dockerhub.git
 > git --version # timeout=10
 > git fetch --tags --progress git@github.com:dmpogorelov/dockerhub.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision f859aa340d568426c6e191768d0fb449eb91de43 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f f859aa340d568426c6e191768d0fb449eb91de43
 > git branch -a -v --no-abbrev # timeout=10
 > git branch -D master # timeout=10
 > git checkout -b master f859aa340d568426c6e191768d0fb449eb91de43
Commit message: "docker + python-app"
 > git rev-list --no-walk f859aa340d568426c6e191768d0fb449eb91de43 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build image)
[Pipeline] script
[Pipeline] {
[Pipeline] sh
+ docker build -t riverd/python-app:4 .
Sending build context to Docker daemon  66.56kB

Step 1/6 : FROM python:alpine3.9
 ---> fe3ef29c73f3
Step 2/6 : COPY . /app
 ---> 47f92f392bdb
Step 3/6 : WORKDIR /app
 ---> Running in dd6092915903
Removing intermediate container dd6092915903
 ---> 1eebd5aeeded
Step 4/6 : RUN pip install -r requirements.txt
 ---> Running in 12df00d83e81
Collecting flask (from -r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/9a/74/670ae9737d14114753b8c8fdf2e8bd212a05d3b361ab15b44937dfd40985/Flask-1.0.3-py2.py3-none-any.whl (92kB)
Collecting itsdangerous>=0.24 (from flask->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting click>=5.1 (from flask->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl (81kB)
Collecting Werkzeug>=0.14 (from flask->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/9f/57/92a497e38161ce40606c27a86759c6b92dd34fcdb33f64171ec559257c02/Werkzeug-0.15.4-py2.py3-none-any.whl (327kB)
Collecting Jinja2>=2.10 (from flask->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/1d/e7/fd8b501e7a6dfe492a433deb7b9d833d39ca74916fa8bc63dd1a4947a671/Jinja2-2.10.1-py2.py3-none-any.whl (124kB)
Collecting MarkupSafe>=0.23 (from Jinja2>=2.10->flask->-r requirements.txt (line 1))
  Downloading https://files.pythonhosted.org/packages/b9/2e/64db92e53b86efccfaea71321f597fa2e1b2bd3853d8ce658568f7a13094/MarkupSafe-1.1.1.tar.gz
Building wheels for collected packages: MarkupSafe
  Building wheel for MarkupSafe (setup.py): started
  Building wheel for MarkupSafe (setup.py): finished with status 'done'
  Stored in directory: /root/.cache/pip/wheels/f2/aa/04/0edf07a1b8a5f5f1aed7580fffb69ce8972edc16a505916a77
Successfully built MarkupSafe
Installing collected packages: itsdangerous, click, Werkzeug, MarkupSafe, Jinja2, flask
Successfully installed Jinja2-2.10.1 MarkupSafe-1.1.1 Werkzeug-0.15.4 click-7.0 flask-1.0.3 itsdangerous-1.1.0
Removing intermediate container 12df00d83e81
 ---> a1f30cb9184a
Step 5/6 : EXPOSE 9000
 ---> Running in df8a24756499
Removing intermediate container df8a24756499
 ---> 54390a655404
Step 6/6 : CMD python ./server.py
 ---> Running in 2961add29b6c
Removing intermediate container 2961add29b6c
 ---> f7850e3a7170
Successfully built f7850e3a7170
Successfully tagged riverd/python-app:4
[Pipeline] dockerFingerprintFrom
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Push image to DockerHub)
[Pipeline] script
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withDockerRegistry
$ docker login -u riverd -p ******** https://index.docker.io/v1/
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /var/lib/jenkins/workspace/12.Docker.Logistics@tmp/d6d5eb60-9624-4c43-878b-b15b24694329/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
[Pipeline] {
[Pipeline] sh
+ docker tag riverd/python-app:4 riverd/python-app:4
[Pipeline] sh
+ docker push riverd/python-app:4
The push refers to repository [docker.io/riverd/python-app]
0f6e7d8c3681: Preparing
dd303765db57: Preparing
5191bfc553a0: Preparing
0db5724f9017: Preparing
7f61afcc4a4d: Preparing
8cec11e3dff0: Preparing
f1b5933fe4b5: Preparing
8cec11e3dff0: Waiting
f1b5933fe4b5: Waiting
7f61afcc4a4d: Layer already exists
0db5724f9017: Layer already exists
5191bfc553a0: Layer already exists
8cec11e3dff0: Layer already exists
f1b5933fe4b5: Layer already exists
dd303765db57: Pushed
0f6e7d8c3681: Pushed
4: digest: sha256:798a35d606b2ccec30736c0ebda609c98839099e024f6d823992426931eece14 size: 1788
[Pipeline] }
[Pipeline] // withDockerRegistry
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Remove image)
[Pipeline] sh
+ docker rmi riverd/python-app:4
Untagged: riverd/python-app:4
Untagged: riverd/python-app@sha256:798a35d606b2ccec30736c0ebda609c98839099e024f6d823992426931eece14
Deleted: sha256:f7850e3a71704a0846bdb36d85841d4e34c5f43db92359f4c65a99d2b0607d18
Deleted: sha256:54390a655404578751167060b774d44f9784073741e249bfb30827638ef43f1f
Deleted: sha256:a1f30cb9184ae1f3656cd642250065788ae5246edf2f81e8aac1a6492dc8796f
Deleted: sha256:fc29f27bc81a6657f865e2532c8c9b1be853fe420dd3f2662bf634cbb7bd70ac
Deleted: sha256:1eebd5aeeded0e89e16af188832fdfba6e0c7418e573a5f95f4cbd02db02dd4f
Deleted: sha256:47f92f392bdb302e0e39a595c1ec7ba09141afcf1a015cf822d990283d110ffa
Deleted: sha256:5aaf06ebaada8dacaf86be1673be4acdee0befac220d0c97415c5090a205cf36
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] slackSend
Slack Send Pipeline step running, values are - baseUrl: https://sa-itacademy-by.slack.com/services/hooks/jenkins-ci/, teamDomain: <empty>, channel: sa_dmpogorelov_tst, color: #00CC00, botUser: false, tokenCredentialId: slack
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS