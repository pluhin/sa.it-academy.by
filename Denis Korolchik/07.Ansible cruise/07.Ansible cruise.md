## 1. I was created 3 files:

#####  - inv.yaml -------------------------inventory files
#####  - web.yaml -------------------------playbook for home task
#####  - /role/web/task/main.yaml ---------task-playbook
#####  - /role/web/task/nginx_cent7.yaml - playbook for OS depend
#####  - /role/web/task/nginx_ubuntu.yaml- playbook for OS depend
#####  - /role/web/template/host.j2	----- jinja file for change /etc/hosts
#####  - /role/web/template/vhost.j2	-----jinja file for change /etc/nginx/conf.d/vhost.config
#####  - /role/web/files/index.html	---- initial html-file for nginx

### main.yaml listing:
```
- name: Include deploy for Debian systems
  include: nginx_cent7.yaml
  when: ansible_os_family == 'RedHat'

- name: Include deploy for RedHat systems
  include: nginx_ubuntu.yaml
  when: ansible_os_family == 'Debian'

- name: Templates for nginx 2x virtual host
  template:
    src: "vhost.j2"
    dest: "/etc/nginx/conf.d/vhost.conf"
    backup: yes
  become: yes
  tags:
    - nginx_vh

- name: Copy file for virt site
  copy: src="{{ item.src }}" dest="{{ item.dest }}"
  with_items:
    - { src: 'index.html', dest: "{{ home }}" }
    - { src: 'index.html', dest: "{{ home2 }}" }
  tags:
    - copy::files

- name: Templates for hosts
  template:
    src: "hosts.j2"
    dest: "/etc/hosts"
    backup: yes
  become: yes
  tags:
    - hosts_tmp

- name: Nginx. Restart servce
  service:
    name: nginx
    state: restarted
    enabled: yes

- name: Check web site
  uri:
    url: http://{{item.name}}
    return_content: yes
  register: this
  failed_when: "'HEllo World' not in this.content "
  with_items: "{{ virtual_hosts }}"
  tags:
    - chk
```

#### LIsting other files you can see into this repository.

## 2. Run playbook web.yaml:
```
ansible-playbook web.yaml -i inv.yaml
```

#### output:
```
root@den-UB18:/home/den/07.ans# ansible-playbook -i inv.yaml web.yaml --ask-vault-pass
Vault password: 

PLAY [webservers] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:51 +0300 (0:00:00.071)       0:00:00.071 ***** 
ok: [ce7]
ok: [ub]

TASK [web : Nginx. Install packages] ***********************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:53 +0300 (0:00:01.520)       0:00:01.592 ***** 
skipping: [ub]
ok: [ce7]

TASK [web : Nginx. Remove welcome file] ********************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:53 +0300 (0:00:00.656)       0:00:02.248 ***** 
skipping: [ub]
ok: [ce7]

TASK [web : Nginx. Enable and start servce] ****************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:54 +0300 (0:00:00.447)       0:00:02.696 ***** 
skipping: [ub]
ok: [ce7]

TASK [web : Nginx. Install packages] ***********************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:54 +0300 (0:00:00.464)       0:00:03.160 ***** 
skipping: [ce7]
ok: [ub]

TASK [web : Nginx. Enable and start servce] ****************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:55 +0300 (0:00:00.921)       0:00:04.082 ***** 
skipping: [ce7]
ok: [ub]

TASK [web : Templates for nginx 2x virtual host] ***********************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:55 +0300 (0:00:00.319)       0:00:04.401 ***** 
ok: [ub]
ok: [ce7]


TASK [web : Copy file for virt site] ***********************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:56 +0300 (0:00:00.682)       0:00:05.084 ***** 
ok: [ub] => (item={u'dest': u'/var/www/html/tst1/', u'src': u'index.html'})
ok: [ce7] => (item={u'dest': u'/var/www/html/tst1/', u'src': u'index.html'})
ok: [ub] => (item={u'dest': u'/var/www/html/tst2/', u'src': u'index.html'})
ok: [ce7] => (item={u'dest': u'/var/www/html/tst2/', u'src': u'index.html'})

TASK [web : Templates for hosts] ***************************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:57 +0300 (0:00:01.096)       0:00:06.181 ***** 
ok: [ub]
ok: [ce7]

TASK [web : Nginx. Restart servce] *************************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:58 +0300 (0:00:00.607)       0:00:06.789 ***** 
changed: [ub]
changed: [ce7]

TASK [web : Chck] ******************************************************************************************************************************************************************************************
Tuesday 10 September 2019  19:55:58 +0300 (0:00:00.476)       0:00:07.266 ***** 
ok: [ub] => (item={u'ip': u'192.168.100.11', u'name': u'ce7.tst1'})
ok: [ce7] => (item={u'ip': u'192.168.100.11', u'name': u'ce7.tst1'})
ok: [ub] => (item={u'ip': u'192.168.100.11', u'name': u'ce7.tst2'})
ok: [ce7] => (item={u'ip': u'192.168.100.11', u'name': u'ce7.tst2'})
ok: [ub] => (item={u'ip': u'192.168.100.10', u'name': u'ub18.tst1'})
ok: [ce7] => (item={u'ip': u'192.168.100.10', u'name': u'ub18.tst1'})
ok: [ub] => (item={u'ip': u'192.168.100.10', u'name': u'ub18.tst2'})
ok: [ce7] => (item={u'ip': u'192.168.100.10', u'name': u'ub18.tst2'})

PLAY RECAP *************************************************************************************************************************************************************************************************
ce7                        : ok=9    changed=1    unreachable=0    failed=0   
ub                         : ok=8    changed=1    unreachable=0    failed=0   

Tuesday 10 September 2019  19:56:00 +0300 (0:00:01.507)       0:00:08.773 ***** 
=============================================================================== 
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.52s
web : Chck ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.51s
web : Copy file for virt site ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.10s
web : Nginx. Install packages ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.92s
web : Templates for nginx 2x virtual host ----------------------------------------------------------------------------------------------------------------------------------------------------------- 0.68s
web : Nginx. Install packages ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.66s
web : Templates for hosts --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.61s
web : Nginx. Restart servce ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.48s
web : Nginx. Enable and start servce ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.46s
web : Nginx. Remove welcome file -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.45s
web : Nginx. Enable and start servce ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.32s

```
