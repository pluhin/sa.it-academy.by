version: '3'

networks:
  net:
    ipam:
      config:
        - subnet: 172.20.0.0/24

services:
  web:
     image: nginx:1.15
     networks:
      net:
        ipv4_address: 172.20.0.99
     ports:
       - 8081:8081
     volumes:
       - ./web:/var/www/html
       - ./nginx.conf:/etc/nginx/nginx.conf
     restart: always

  sonarr:
    depends_on:
       - web
    image: linuxserver/sonarr
    container_name: sonarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      - UMASK_SET=022 #optional
    volumes:
      - ./sdata:/config
      - ./stvseries:/tv
      - ./sdownloads:/downloads
    networks:
      net:
        ipv4_address: 172.20.0.100
    ports:
      - 8989:8989
    restart: unless-stopped

  radarr:
    depends_on:
       - web
    image: linuxserver/radarr
    container_name: radarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      - UMASK_SET=022 #optional
    volumes:
      - ./rdata:/config
      - ./rmovies:/movies
      - ./rdownloads:/downloads
    networks:
      net:
        ipv4_address: 172.20.0.101
    ports:
      - 7878:7878
    restart: unless-stopped

volumes:
    web: 
    sdata: 
    stvseries: 
    sdownloads: 
    rdata: 
    rmovies: 
    rdownloads: