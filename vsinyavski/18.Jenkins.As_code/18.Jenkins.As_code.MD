## 18.Jenkins.As_code

+ ### [Jenkinsfile](https://github.com/astarosh87/my_repo/blob/main/Jenkinsfile)
---
+ ### [Report](https://github.com/astarosh87/my_repo/blob/main/Report.txt)
---

### Output console

```
Started by user admin
Obtained Jenkinsfile from git git@github.com:astarosh87/my_repo.git
Running in Durability level: MAX_SURVIVABILITY

[Pipeline] Start of Pipeline

[Pipeline] node
Running on node_ec_htp in /home/jenkins/workspace/18.HW.Task
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: git
using credential git_ssh_jenkins
Cloning the remote Git repository

Cloning repository git@github.com:astarosh87/my_repo.git
 > git init /home/jenkins/workspace/18.HW.Task # timeout=10
Fetching upstream changes from git@github.com:astarosh87/my_repo.git
 > git --version # timeout=10
 > git --version # 'git version 2.17.1'
using GIT_SSH to set credentials 
 > git fetch --tags --progress -- git@github.com:astarosh87/my_repo.git +refs/heads/*:refs/remotes/origin/* # timeout=10

Avoid second fetch
Checking out Revision f1ab8bf06b8430444a793b0052fa176c45599f74 (refs/remotes/origin/main)
Commit message: "Jenkins update"
 > git config remote.origin.url git@github.com:astarosh87/my_repo.git # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
 > git config core.sparsecheckout # timeout=10
 > git checkout -f f1ab8bf06b8430444a793b0052fa176c45599f74 # timeout=10
 > git rev-list --no-walk cabc88bd17e26391312df0d8d8b241b6a4cc895e # timeout=10
[Pipeline] }

[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Git repo connection)
[Pipeline] git
The recommended git tool is: git
using credential git_ssh_jenkins
Fetching changes from the remote Git repository
 > git rev-parse --resolve-git-dir /home/jenkins/workspace/18.HW.Task/.git # timeout=10
 > git config remote.origin.url git@github.com:astarosh87/my_repo.git # timeout=10
Fetching upstream changes from git@github.com:astarosh87/my_repo.git
 > git --version # timeout=10
 > git --version # 'git version 2.17.1'
using GIT_SSH to set credentials 
 > git fetch --tags --progress -- git@github.com:astarosh87/my_repo.git +refs/heads/*:refs/remotes/origin/* # timeout=10

Checking out Revision f1ab8bf06b8430444a793b0052fa176c45599f74 (refs/remotes/origin/main)
Commit message: "Jenkins update"
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Count hosts & measure connection speed)
[Pipeline] sh

+ sudo apt update

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Hit:1 http://packages.icinga.com/ubuntu icinga-bionic InRelease
Hit:2 http://archive.ubuntu.com/ubuntu bionic InRelease
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
 > git config core.sparsecheckout # timeout=10
 > git checkout -f f1ab8bf06b8430444a793b0052fa176c45599f74 # timeout=10
 > git branch -a -v --no-abbrev # timeout=10
 > git checkout -b main f1ab8bf06b8430444a793b0052fa176c45599f74 # timeout=10
Get:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
Get:4 http://archive.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
Fetched 177 kB in 1s (309 kB/s)

Reading package lists...
Building dependency tree...
Reading state information...
4 packages can be upgraded. Run 'apt list --upgradable' to see them.
+ sudo apt install nmap -y

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...

nmap is already the newest version (7.60-1ubuntu5).
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
+ sudo apt install python-pip

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Reading package lists...
Building dependency tree...
Reading state information...

python-pip is already the newest version (9.0.1-2.3~ubuntu1.18.04.5).
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
+ pip install speedtest_cli

Collecting speedtest_cli
  Using cached https://files.pythonhosted.org/packages/9f/39/65259b7054368b370d3183762484fa2c779ddc41633894d895f9d1720f45/speedtest_cli-2.1.3-py2.py3-none-any.whl
Installing collected packages: speedtest-cli
Successfully installed speedtest-cli-2.1.3
+ nmap -sn 192.168.201.* 192.168.202.* 192.168.203.*
+ tail -n 1

+ speedtest-cli

+ cat Report.txt
Nmap done: 768 IP addresses (86 hosts up) scanned in 11.42 seconds
Retrieving speedtest.net configuration...
Testing from COSMOS Telecom (178.172.195.18)...
Retrieving speedtest.net server list...
Selecting best server based on ping...
Hosted by JLLC "COSMOS TV" (Minsk) [0.29 km]: 26.207 ms
Testing download speed................................................................................
Download: 742.01 Mbit/s
Testing upload speed................................................................................................
Upload: 833.33 Mbit/s
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Push report)
[Pipeline] sh
+ git add Report.txt
+ git config --global user.email als.brodeur@gmail.com
+ git config --global user.name Vitali Sinyavski
+ git commit -m add report HW_18_jenkins
[main a43c374] add report HW_18_jenkins
 1 file changed, 4 insertions(+), 4 deletions(-)
+ git push git@github.com:astarosh87/my_repo.git

To github.com:astarosh87/my_repo.git
   f1ab8bf..a43c374  main -> main
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] deleteDir
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS

```