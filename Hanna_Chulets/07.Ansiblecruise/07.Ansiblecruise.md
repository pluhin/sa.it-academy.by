## Run nginx role

```bash
ann@vagrant:~/ansible$ ansible-playbook -i inventory.yml web.yml 

PLAY [work_hosts] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:04 +0000 (0:00:00.073)       0:00:00.073 ********* 
ok: [centos]
ok: [ubuntu]

TASK [nginx : Nginx. Install packages on Debian] ***********************************************************************************************************************************************************
Thursday 08 July 2021  07:51:06 +0000 (0:00:02.410)       0:00:02.484 ********* 
skipping: [centos]
ok: [ubuntu]

TASK [nginx : Nginx. Install packages on RedHat] ***********************************************************************************************************************************************************
Thursday 08 July 2021  07:51:12 +0000 (0:00:05.403)       0:00:07.888 ********* 
skipping: [ubuntu]
ok: [centos]

TASK [nginx : Nginx. Enable and start service] *************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:13 +0000 (0:00:01.298)       0:00:09.186 ********* 
ok: [ubuntu]
ok: [centos]

TASK [nginx : Nginx. Enable firewall port] *****************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:14 +0000 (0:00:00.993)       0:00:10.179 ********* 
skipping: [ubuntu]
ok: [centos]

TASK [nginx : reload service firewalld] ********************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:15 +0000 (0:00:01.051)       0:00:11.230 ********* 
skipping: [ubuntu]
changed: [centos]

TASK [nginx : Copy first page] *****************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:16 +0000 (0:00:00.927)       0:00:12.157 ********* 
ok: [ubuntu]
ok: [centos]

TASK [nginx : Check connection to Localhost] ***************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:18 +0000 (0:00:01.538)       0:00:13.696 ********* 
ok: [ubuntu]
ok: [centos]

TASK [nginx : print out] ***********************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:18 +0000 (0:00:00.737)       0:00:14.433 ********* 
ok: [centos] => {
    "msg": {
        "changed": false,
        "elapsed": 0,
        "failed": false,
        "match_groupdict": {},
        "match_groups": [],
        "path": null,
        "port": 80,
        "search_regex": null,
        "state": "started"
    }
}
ok: [ubuntu] => {
    "msg": {
        "changed": false,
        "elapsed": 0,
        "failed": false,
        "match_groupdict": {},
        "match_groups": [],
        "path": null,
        "port": 80,
        "search_regex": null,
        "state": "started"
    }
}

TASK [nginx : Templates] ***********************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:18 +0000 (0:00:00.084)       0:00:14.518 ********* 
ok: [ubuntu]
ok: [centos]

TASK [nginx : Check template] ******************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:19 +0000 (0:00:01.002)       0:00:15.520 ********* 
ok: [ubuntu]
ok: [centos]

TASK [nginx : print out] ***********************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:20 +0000 (0:00:00.762)       0:00:16.283 ********* 
ok: [centos] => {
    "msg": [
        "### Ansible managed",
        "127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4",
        "::1         localhost localhost.localdomain localhost6 localhost6.localdomain6",
        "",
        "192.168.202.31   local-cent.site",
        "192.168.202.32   local-deb.site"
    ]
}
ok: [ubuntu] => {
    "msg": [
        "### Ansible managed",
        "127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4",
        "::1         localhost localhost.localdomain localhost6 localhost6.localdomain6",
        "",
        "192.168.202.31   local-cent.site",
        "192.168.202.32   local-deb.site"
    ]
}

TASK [nginx : Check content to the sites] ******************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:20 +0000 (0:00:00.104)       0:00:16.387 ********* 
ok: [ubuntu] => (item={'name': 'local-cent.site', 'ip': '192.168.202.31'})
ok: [centos] => (item={'name': 'local-cent.site', 'ip': '192.168.202.31'})
ok: [ubuntu] => (item={'name': 'local-deb.site', 'ip': '192.168.202.32'})
ok: [centos] => (item={'name': 'local-deb.site', 'ip': '192.168.202.32'})

TASK [nginx : print out] ***********************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:22 +0000 (0:00:01.397)       0:00:17.785 ********* 
ok: [centos] => {
    "msg": {
        "changed": false,
        "msg": "All items completed",
        "results": [
            {
                "accept_ranges": "bytes",
                "ansible_loop_var": "item",
                "changed": false,
                "connection": "close",
                "content": "<h1>Tekila!</h1>\n",
                "content_length": "17",
                "content_type": "text/html",
                "cookies": {},
                "cookies_string": "",
                "date": "Thu, 08 Jul 2021 07:50:16 GMT",
                "elapsed": 0,
                "etag": "\"60e61536-11\"",
                "failed": false,
                "failed_when_result": false,
                "invocation": {
                    "module_args": {
                        "attributes": null,
                        "backup": null,
                        "body": null,
                        "body_format": "raw",
                        "client_cert": null,
                        "client_key": null,
                        "content": null,
                        "creates": null,
                        "delimiter": null,
                        "dest": null,
                        "directory_mode": null,
                        "follow": false,
                        "follow_redirects": "safe",
                        "force": false,
                        "force_basic_auth": false,
                        "group": null,
                        "headers": {},
                        "http_agent": "ansible-httpget",
                        "method": "GET",
                        "mode": null,
                        "owner": null,
                        "regexp": null,
                        "remote_src": null,
                        "removes": null,
                        "return_content": true,
                        "selevel": null,
                        "serole": null,
                        "setype": null,
                        "seuser": null,
                        "src": null,
                        "status_code": [
                            200
                        ],
                        "timeout": 30,
                        "unix_socket": null,
                        "unsafe_writes": null,
                        "url": "http://local-cent.site",
                        "url_password": null,
                        "url_username": null,
                        "use_proxy": true,
                        "validate_certs": true
                    }
                },
                "item": {
                    "ip": "192.168.202.31",
                    "name": "local-cent.site"
                },
                "last_modified": "Wed, 07 Jul 2021 20:57:26 GMT",
                "msg": "OK (17 bytes)",
                "redirected": false,
                "server": "nginx/1.20.1",
                "status": 200,
                "url": "http://local-cent.site"
            },
            {
                "accept_ranges": "bytes",
                "ansible_loop_var": "item",
                "changed": false,
                "connection": "close",
                "content": "<h1>Tekila!</h1>\n",
                "content_length": "17",
                "content_type": "text/html",
                "cookies": {},
                "cookies_string": "",
                "date": "Thu, 08 Jul 2021 07:50:17 GMT",
                "elapsed": 0,
                "etag": "\"60e6134a-11\"",
                "failed": false,
                "failed_when_result": false,
                "invocation": {
                    "module_args": {
                        "attributes": null,
                        "backup": null,
                        "body": null,
                        "body_format": "raw",
                        "client_cert": null,
                        "client_key": null,
                        "content": null,
                        "creates": null,
                        "delimiter": null,
                        "dest": null,
                        "directory_mode": null,
                        "follow": false,
                        "follow_redirects": "safe",
                        "force": false,
                        "force_basic_auth": false,
                        "group": null,
                        "headers": {},
                        "http_agent": "ansible-httpget",
                        "method": "GET",
                        "mode": null,
                        "owner": null,
                        "regexp": null,
                        "remote_src": null,
                        "removes": null,
                        "return_content": true,
                        "selevel": null,
                        "serole": null,
                        "setype": null,
                        "seuser": null,
                        "src": null,
                        "status_code": [
                            200
                        ],
                        "timeout": 30,
                        "unix_socket": null,
                        "unsafe_writes": null,
                        "url": "http://local-deb.site",
                        "url_password": null,
                        "url_username": null,
                        "use_proxy": true,
                        "validate_certs": true
                    }
                },
                "item": {
                    "ip": "192.168.202.32",
                    "name": "local-deb.site"
                },
                "last_modified": "Wed, 07 Jul 2021 20:49:14 GMT",
                "msg": "OK (17 bytes)",
                "redirected": false,
                "server": "nginx/1.14.0 (Ubuntu)",
                "status": 200,
                "url": "http://local-deb.site"
            }
        ]
    }
}
ok: [ubuntu] => {
    "msg": {
        "changed": false,
        "msg": "All items completed",
        "results": [
            {
                "accept_ranges": "bytes",
                "ansible_loop_var": "item",
                "changed": false,
                "connection": "close",
                "content": "<h1>Tekila!</h1>\n",
                "content_length": "17",
                "content_type": "text/html",
                "cookies": {},
                "cookies_string": "",
                "date": "Thu, 08 Jul 2021 07:50:16 GMT",
                "elapsed": 0,
                "etag": "\"60e61536-11\"",
                "failed": false,
                "failed_when_result": false,
                "invocation": {
                    "module_args": {
                        "attributes": null,
                        "backup": null,
                        "body": null,
                        "body_format": "raw",
                        "client_cert": null,
                        "client_key": null,
                        "content": null,
                        "creates": null,
                        "delimiter": null,
                        "dest": null,
                        "directory_mode": null,
                        "follow": false,
                        "follow_redirects": "safe",
                        "force": false,
                        "force_basic_auth": false,
                        "group": null,
                        "headers": {},
                        "http_agent": "ansible-httpget",
                        "method": "GET",
                        "mode": null,
                        "owner": null,
                        "regexp": null,
                        "remote_src": null,
                        "removes": null,
                        "return_content": true,
                        "selevel": null,
                        "serole": null,
                        "setype": null,
                        "seuser": null,
                        "src": null,
                        "status_code": [
                            200
                        ],
                        "timeout": 30,
                        "unix_socket": null,
                        "unsafe_writes": null,
                        "url": "http://local-cent.site",
                        "url_password": null,
                        "url_username": null,
                        "use_proxy": true,
                        "validate_certs": true
                    }
                },
                "item": {
                    "ip": "192.168.202.31",
                    "name": "local-cent.site"
                },
                "last_modified": "Wed, 07 Jul 2021 20:57:26 GMT",
                "msg": "OK (17 bytes)",
                "redirected": false,
                "server": "nginx/1.20.1",
                "status": 200,
                "url": "http://local-cent.site"
            },
            {
                "accept_ranges": "bytes",
                "ansible_loop_var": "item",
                "changed": false,
                "connection": "close",
                "content": "<h1>Tekila!</h1>\n",
                "content_length": "17",
                "content_type": "text/html",
                "cookies": {},
                "cookies_string": "",
                "date": "Thu, 08 Jul 2021 07:50:17 GMT",
                "elapsed": 0,
                "etag": "\"60e6134a-11\"",
                "failed": false,
                "failed_when_result": false,
                "invocation": {
                    "module_args": {
                        "attributes": null,
                        "backup": null,
                        "body": null,
                        "body_format": "raw",
                        "client_cert": null,
                        "client_key": null,
                        "content": null,
                        "creates": null,
                        "delimiter": null,
                        "dest": null,
                        "directory_mode": null,
                        "follow": false,
                        "follow_redirects": "safe",
                        "force": false,
                        "force_basic_auth": false,
                        "group": null,
                        "headers": {},
                        "http_agent": "ansible-httpget",
                        "method": "GET",
                        "mode": null,
                        "owner": null,
                        "regexp": null,
                        "remote_src": null,
                        "removes": null,
                        "return_content": true,
                        "selevel": null,
                        "serole": null,
                        "setype": null,
                        "seuser": null,
                        "src": null,
                        "status_code": [
                            200
                        ],
                        "timeout": 30,
                        "unix_socket": null,
                        "unsafe_writes": null,
                        "url": "http://local-deb.site",
                        "url_password": null,
                        "url_username": null,
                        "use_proxy": true,
                        "validate_certs": true
                    }
                },
                "item": {
                    "ip": "192.168.202.32",
                    "name": "local-deb.site"
                },
                "last_modified": "Wed, 07 Jul 2021 20:49:14 GMT",
                "msg": "OK (17 bytes)",
                "redirected": false,
                "server": "nginx/1.14.0 (Ubuntu)",
                "status": 200,
                "url": "http://local-deb.site"
            }
        ]
    }
}

TASK [test : Check if we have SUDO with NOPASSWD] **********************************************************************************************************************************************************
Thursday 08 July 2021  07:51:22 +0000 (0:00:00.100)       0:00:17.885 ********* 
ok: [ubuntu]
ok: [centos]

TASK [test : Check connections to public repositories and docker hub registry] *****************************************************************************************************************************
Thursday 08 July 2021  07:51:22 +0000 (0:00:00.585)       0:00:18.471 ********* 
ok: [ubuntu] => (item=http://archive.ubuntu.com)
ok: [centos] => (item=http://mirror.centos.org/centos)
ok: [ubuntu] => (item=https://pypi.org/simple)
ok: [centos] => (item=https://pypi.org/simple)
ok: [ubuntu] => (item=https://hub.docker.com)
ok: [centos] => (item=https://hub.docker.com)

TASK [test : print out] ************************************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:29 +0000 (0:00:06.693)       0:00:25.165 ********* 
ok: [centos] => {
    "msg": "All items completed"
}
ok: [ubuntu] => {
    "msg": "All items completed"
}

TASK [test : Check if we have enough RAM] ******************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:29 +0000 (0:00:00.095)       0:00:25.260 ********* 
ok: [centos] => {
    "changed": false,
    "msg": "RAM 3507 MB is available. System RAM total 4096 MB"
}
ok: [ubuntu] => {
    "changed": false,
    "msg": "RAM 3070 MB is available. System RAM total 4096 MB"
}

TASK [test : Check if we have enough HDD] ******************************************************************************************************************************************************************
Thursday 08 July 2021  07:51:29 +0000 (0:00:00.154)       0:00:25.415 ********* 
ok: [centos] => {
    "changed": false,
    "msg": "HDD 19.0 GB is available."
}
ok: [ubuntu] => {
    "changed": false,
    "msg": "HDD 18.3 GB is available."
}

PLAY RECAP *************************************************************************************************************************************************************************************************
centos                     : ok=18   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
ubuntu                     : ok=16   changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   

Thursday 08 July 2021  07:51:29 +0000 (0:00:00.078)       0:00:25.493 ********* 
=============================================================================== 
test : Check connections to public repositories and docker hub registry ----------------------------------------------------------------------------------------------------------------------------- 6.69s
nginx : Nginx. Install packages on Debian ----------------------------------------------------------------------------------------------------------------------------------------------------------- 5.40s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.41s
nginx : Copy first page ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.54s
nginx : Check content to the sites ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.40s
nginx : Nginx. Install packages on RedHat ----------------------------------------------------------------------------------------------------------------------------------------------------------- 1.30s
nginx : Nginx. Enable firewall port ----------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.05s
nginx : Templates ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.00s
nginx : Nginx. Enable and start service ------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.99s
nginx : reload service firewalld -------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.93s
nginx : Check template ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.76s
nginx : Check connection to Localhost --------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.74s
test : Check if we have SUDO with NOPASSWD ---------------------------------------------------------------------------------------------------------------------------------------------------------- 0.59s
test : Check if we have enough RAM ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.15s
nginx : print out ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.10s
nginx : print out ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.10s
test : print out ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.10s
nginx : print out ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.08s
test : Check if we have enough HDD ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.08s
Playbook run took 0 days, 0 hours, 0 minutes, 25 seconds

```

## Run molecule test

``` bash
ann@vagrant:~/ansible/roles/test$ molecule test
INFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy
INFO     Performing prerun...
INFO     Running default > dependency
WARNING  Skipping, missing the requirements file.
WARNING  Skipping, missing the requirements file.
INFO     Running default > lint
INFO     Lint is disabled.
INFO     Running default > cleanup
WARNING  Skipping, cleanup playbook not configured.
INFO     Running default > destroy
INFO     Sanity checks: 'docker'

PLAY [Destroy] *********************************************************************************************************************************************************************************************

TASK [Destroy molecule instance(s)] ************************************************************************************************************************************************************************
changed: [localhost] => (item=instance_cent)
changed: [localhost] => (item=instance_deb)
changed: [localhost] => (item=instance_alpine)

TASK [Wait for instance(s) deletion to complete] ***********************************************************************************************************************************************************
ok: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '250630577960.20984', 'results_file': '/home/ann/.ansible_async/250630577960.20984', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
ok: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '859425869566.21009', 'results_file': '/home/ann/.ansible_async/859425869566.21009', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
ok: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '381158800218.21042', 'results_file': '/home/ann/.ansible_async/381158800218.21042', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}, 'ansible_loop_var': 'item'})

TASK [Delete docker network(s)] ****************************************************************************************************************************************************************************

PLAY RECAP *************************************************************************************************************************************************************************************************
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0

INFO     Running default > syntax

playbook: /home/ann/ansible/roles/test/molecule/default/converge.yml
INFO     Running default > create

PLAY [Create] **********************************************************************************************************************************************************************************************

TASK [Log into a Docker registry] **************************************************************************************************************************************************************************
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}) 
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}) 
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}) 

TASK [Check presence of custom Dockerfiles] ****************************************************************************************************************************************************************
ok: [localhost] => (item={'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True})
ok: [localhost] => (item={'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True})
ok: [localhost] => (item={'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True})

TASK [Create Dockerfiles from image names] *****************************************************************************************************************************************************************
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}) 
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}) 
skipping: [localhost] => (item={'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}) 

TASK [Discover local Docker images] ************************************************************************************************************************************************************************
ok: [localhost] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}, 'ansible_loop_var': 'item', 'i': 0, 'ansible_index_var': 'i'})
ok: [localhost] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}, 'ansible_loop_var': 'item', 'i': 1, 'ansible_index_var': 'i'})
ok: [localhost] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}, 'ansible_loop_var': 'item', 'i': 2, 'ansible_index_var': 'i'})

TASK [Build an Ansible compatible image (new)] *************************************************************************************************************************************************************
skipping: [localhost] => (item=molecule_local/docker.io/pycontribs/centos:7) 
skipping: [localhost] => (item=molecule_local/docker.io/pycontribs/debian:latest) 
skipping: [localhost] => (item=molecule_local/docker.io/pycontribs/alpine:latest) 

TASK [Create docker network(s)] ****************************************************************************************************************************************************************************

TASK [Determine the CMD directives] ************************************************************************************************************************************************************************
ok: [localhost] => (item={'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True})
ok: [localhost] => (item={'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True})
ok: [localhost] => (item={'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True})

TASK [Create molecule instance(s)] *************************************************************************************************************************************************************************
changed: [localhost] => (item=instance_cent)
changed: [localhost] => (item=instance_deb)
changed: [localhost] => (item=instance_alpine)

TASK [Wait for instance(s) creation to complete] ***********************************************************************************************************************************************************
FAILED - RETRYING: Wait for instance(s) creation to complete (300 retries left).
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '475732794163.21377', 'results_file': '/home/ann/.ansible_async/475732794163.21377', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '753820673994.21402', 'results_file': '/home/ann/.ansible_async/753820673994.21402', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '182687640617.21439', 'results_file': '/home/ann/.ansible_async/182687640617.21439', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}, 'ansible_loop_var': 'item'})

PLAY RECAP *************************************************************************************************************************************************************************************************
localhost                  : ok=5    changed=2    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0

INFO     Running default > prepare
WARNING  Skipping, prepare playbook not configured.
INFO     Running default > converge

PLAY [Converge] ********************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [instance_alpine]
ok: [instance_deb]
ok: [instance_cent]

TASK [Include test] ****************************************************************************************************************************************************************************************

TASK [test : Check if we have SUDO with NOPASSWD] **********************************************************************************************************************************************************
ok: [instance_alpine]
ok: [instance_deb]
ok: [instance_cent]

TASK [test : Check connections to public repositories and docker hub registry] *****************************************************************************************************************************
ok: [instance_cent] => (item=http://mirror.centos.org/centos)
ok: [instance_deb] => (item=http://archive.ubuntu.com)
ok: [instance_alpine] => (item=http://mirror.centos.org/centos)
ok: [instance_deb] => (item=https://pypi.org/simple)
ok: [instance_alpine] => (item=https://pypi.org/simple)
ok: [instance_cent] => (item=https://pypi.org/simple)
ok: [instance_cent] => (item=https://hub.docker.com)
ok: [instance_deb] => (item=https://hub.docker.com)
ok: [instance_alpine] => (item=https://hub.docker.com)

TASK [test : print out] ************************************************************************************************************************************************************************************
ok: [instance_deb] => {
    "msg": "All items completed"
}
ok: [instance_alpine] => {
    "msg": "All items completed"
}
ok: [instance_cent] => {
    "msg": "All items completed"
}

TASK [test : Check if we have enough RAM] ******************************************************************************************************************************************************************
fatal: [instance_alpine]: FAILED! => {
    "assertion": "ansible_memory_mb.real.free | int >= 1024",
    "changed": false,
    "evaluated_to": false,
    "msg": "Only RAM 981 MB is available. 1024 MB is required minimum. System RAM total 981 MB"
}
fatal: [instance_deb]: FAILED! => {
    "assertion": "ansible_memory_mb.real.free | int >= 1024",
    "changed": false,
    "evaluated_to": false,
    "msg": "Only RAM 981 MB is available. 1024 MB is required minimum. System RAM total 981 MB"
}
fatal: [instance_cent]: FAILED! => {
    "assertion": "ansible_memory_mb.real.free | int >= 1024",
    "changed": false,
    "evaluated_to": false,
    "msg": "Only RAM 981 MB is available. 1024 MB is required minimum. System RAM total 981 MB"
}

PLAY RECAP *************************************************************************************************************************************************************************************************
instance_alpine            : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0
instance_cent              : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0
instance_deb               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0


CRITICAL Ansible return code was 2, command was: ansible-playbook --inventory /home/ann/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /home/ann/ansible/roles/test/molecule/default/converge.yml
WARNING  An error occurred during the test sequence action: 'converge'. Cleaning up.
INFO     Running default > cleanup
WARNING  Skipping, cleanup playbook not configured.
INFO     Running default > destroy

PLAY [Destroy] *********************************************************************************************************************************************************************************************

TASK [Destroy molecule instance(s)] ************************************************************************************************************************************************************************
changed: [localhost] => (item=instance_cent)
changed: [localhost] => (item=instance_deb)
changed: [localhost] => (item=instance_alpine)

TASK [Wait for instance(s) deletion to complete] ***********************************************************************************************************************************************************
FAILED - RETRYING: Wait for instance(s) deletion to complete (300 retries left).
FAILED - RETRYING: Wait for instance(s) deletion to complete (299 retries left).
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '811983248055.24977', 'results_file': '/home/ann/.ansible_async/811983248055.24977', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/centos:7', 'name': 'instance_cent', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '571846350746.25003', 'results_file': '/home/ann/.ansible_async/571846350746.25003', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/debian:latest', 'name': 'instance_deb', 'pre_build_image': True}, 'ansible_loop_var': 'item'})
changed: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '810913321517.25027', 'results_file': '/home/ann/.ansible_async/810913321517.25027', 'changed': True, 'failed': False, 'item': {'image': 'docker.io/pycontribs/alpine:latest', 'name': 'instance_alpine', 'pre_build_image': True}, 'ansible_loop_var': 'item'})

TASK [Delete docker network(s)] ****************************************************************************************************************************************************************************

PLAY RECAP *************************************************************************************************************************************************************************************************
localhost                  : ok=2    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0

INFO     Pruning extra files from scenario ephemeral directory

```