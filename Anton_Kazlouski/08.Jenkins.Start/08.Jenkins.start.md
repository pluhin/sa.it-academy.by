# Devops, Laba 08 Jenkins Start Results by Anton Kazlouski

The aim of it is to deploy Jenkins behind the web server Ngnix. It's split into two parts. First,we need to up the vagrant virtualbox. Then Jenkins and Nginx must be installed with the help of absible.

To run the vagrant fire the following command from the folder 08.Jenkins.Start/vagrant: "vagrant up".
To run the playbook fire the following command from the folder 08.Jenkins.Start: "ansible-playbook --private-key=./vagrant/.vagrant/machines/jenkins/virtualbox/private_key -i inventory/main.yaml  main.yaml".

All necessary files can be found in the folder of the file.

The file Vagrantfile:

```bash

Vagrant.configure("2") do |config|
  if Vagrant.has_plugin?("vagrant-timezone")
      config.timezone.value = "Europe/Minsk"
  end
  config.vm.box = "centos/7"
  config.vm.hostname = "jenkins"
  config.vm.define "jenkins"
  config.vm.network "private_network", ip: "192.168.56.200"
end

```

## The results

```bash

➜  08.Jenkins.Start ansible-playbook --private-key=./vagrant/.vagrant/machines/jenkins/virtualbox/private_key -i inventory/main.yaml  main.yaml

PLAY [jenkins] *************************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************************
Tuesday 09 July 2019  14:00:33 +0200 (0:00:00.018)       0:00:00.018 ********** 
ok: [jenkins]

TASK [jenkins : install prerequisites] *************************************************************************************************************************************
Tuesday 09 July 2019  14:00:34 +0200 (0:00:00.959)       0:00:00.978 ********** 
ok: [jenkins]

TASK [jenkins : add repo] **************************************************************************************************************************************************
Tuesday 09 July 2019  14:01:11 +0200 (0:00:36.836)       0:00:37.814 ********** 
ok: [jenkins]

TASK [jenkins : add key] ***************************************************************************************************************************************************
Tuesday 09 July 2019  14:01:11 +0200 (0:00:00.326)       0:00:38.141 ********** 
ok: [jenkins]

TASK [jenkins : install jenkins] *******************************************************************************************************************************************
Tuesday 09 July 2019  14:01:16 +0200 (0:00:05.076)       0:00:43.218 ********** 
ok: [jenkins]

TASK [jenkins : Enable service jenkins, and not touch the state] ***********************************************************************************************************
Tuesday 09 July 2019  14:01:34 +0200 (0:00:18.185)       0:01:01.403 ********** 
ok: [jenkins]

TASK [jenkins : start jenkins] *********************************************************************************************************************************************
Tuesday 09 July 2019  14:01:35 +0200 (0:00:00.434)       0:01:01.837 ********** 
ok: [jenkins]

TASK [jenkins : Jenkins. Open Firewall Port] *******************************************************************************************************************************
Tuesday 09 July 2019  14:01:35 +0200 (0:00:00.226)       0:01:02.063 ********** 
ok: [jenkins]

TASK [jenkins : Wait for the file] *****************************************************************************************************************************************
Tuesday 09 July 2019  14:01:36 +0200 (0:00:00.446)       0:01:02.510 ********** 
ok: [jenkins]

TASK [jenkins : pass] ******************************************************************************************************************************************************
Tuesday 09 July 2019  14:01:36 +0200 (0:00:00.263)       0:01:02.774 ********** 
changed: [jenkins]

TASK [jenkins : pass for jenkins] ******************************************************************************************************************************************
Tuesday 09 July 2019  14:01:36 +0200 (0:00:00.258)       0:01:03.032 ********** 
ok: [jenkins] => {
    "msg": "434f9d09f585468f95b793c75fc7c59f"
}

TASK [jenkins : install nginx] *********************************************************************************************************************************************
Tuesday 09 July 2019  14:01:36 +0200 (0:00:00.022)       0:01:03.055 ********** 
ok: [jenkins]

TASK [jenkins : ensure nginx is installed] *********************************************************************************************************************************
Tuesday 09 July 2019  14:01:47 +0200 (0:00:11.078)       0:01:14.133 ********** 
changed: [jenkins]

TASK [jenkins : firewall] **************************************************************************************************************************************************
Tuesday 09 July 2019  14:01:48 +0200 (0:00:00.312)       0:01:14.445 ********** 
ok: [jenkins]

TASK [jenkins : remove nginx default] **************************************************************************************************************************************
Tuesday 09 July 2019  14:01:48 +0200 (0:00:00.342)       0:01:14.787 ********** 
changed: [jenkins] => (item=/etc/nginx/sites-available)
changed: [jenkins] => (item=/etc/nginx/sites-enabled)

TASK [jenkins : Create virtual hosts directory if it does not exist] *******************************************************************************************************
Tuesday 09 July 2019  14:01:48 +0200 (0:00:00.425)       0:01:15.213 ********** 
changed: [jenkins] => (item={u'path': u'/etc/nginx/sites-available/'})
changed: [jenkins] => (item={u'path': u'/etc/nginx/sites-enabled/'})

TASK [jenkins : add config file] *******************************************************************************************************************************************
Tuesday 09 July 2019  14:01:49 +0200 (0:00:00.344)       0:01:15.558 ********** 
ok: [jenkins] => (item={u'dest': u'/etc/nginx/nginx.conf', u'src': u'default.conf.j2'})
changed: [jenkins] => (item={u'dest': u'/etc/nginx/sites-available/jenkins.conf', u'src': u'jenkins.conf'})

TASK [jenkins : create link] ***********************************************************************************************************************************************
Tuesday 09 July 2019  14:01:49 +0200 (0:00:00.777)       0:01:16.336 ********** 
changed: [jenkins]

TASK [jenkins : restart nginx] *********************************************************************************************************************************************
Tuesday 09 July 2019  14:01:50 +0200 (0:00:00.175)       0:01:16.511 ********** 
changed: [jenkins]

PLAY RECAP *****************************************************************************************************************************************************************
jenkins                    : ok=19   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Tuesday 09 July 2019  14:01:50 +0200 (0:00:00.273)       0:01:16.785 ********** 
=============================================================================== 
jenkins : install prerequisites ------------------------------------------------------------------------------------------------------------------------------------ 36.84s
jenkins : install jenkins ------------------------------------------------------------------------------------------------------------------------------------------ 18.19s
jenkins : install nginx -------------------------------------------------------------------------------------------------------------------------------------------- 11.08s
jenkins : add key --------------------------------------------------------------------------------------------------------------------------------------------------- 5.08s
Gathering Facts ----------------------------------------------------------------------------------------------------------------------------------------------------- 0.96s
jenkins : add config file ------------------------------------------------------------------------------------------------------------------------------------------- 0.78s
jenkins : Jenkins. Open Firewall Port ------------------------------------------------------------------------------------------------------------------------------- 0.45s
jenkins : Enable service jenkins, and not touch the state ----------------------------------------------------------------------------------------------------------- 0.43s
jenkins : remove nginx default -------------------------------------------------------------------------------------------------------------------------------------- 0.43s
jenkins : Create virtual hosts directory if it does not exist ------------------------------------------------------------------------------------------------------- 0.34s
jenkins : firewall -------------------------------------------------------------------------------------------------------------------------------------------------- 0.34s
jenkins : add repo -------------------------------------------------------------------------------------------------------------------------------------------------- 0.33s
jenkins : ensure nginx is installed --------------------------------------------------------------------------------------------------------------------------------- 0.31s
jenkins : restart nginx --------------------------------------------------------------------------------------------------------------------------------------------- 0.27s
jenkins : Wait for the file ----------------------------------------------------------------------------------------------------------------------------------------- 0.26s
jenkins : pass ------------------------------------------------------------------------------------------------------------------------------------------------------ 0.26s
jenkins : start jenkins --------------------------------------------------------------------------------------------------------------------------------------------- 0.23s
jenkins : create link ----------------------------------------------------------------------------------------------------------------------------------------------- 0.18s
jenkins : pass for jenkins ------------------------------------------------------------------------------------------------------------------------------------------ 0.02s
➜  08.Jenkins.Start 


```

