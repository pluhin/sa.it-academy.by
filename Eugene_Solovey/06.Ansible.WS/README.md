# 06.Ansible.Workshop

## Preparing

All files (playbook, inventory and jinja2 templates) in current PR.

All tasks with name as a description of performed actions.

## Playbook run output

```bash
ansible-playbook -i inventory.yaml playbook_nginx.yaml

PLAY [Group of hosts] ***********************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************
Friday 13 January 2023  00:29:02 +0300 (0:00:00.013)       0:00:00.013 ********
ok: [host36]
ok: [host35]

TASK [Update the repository cache and update package "nginx" to latest version] *************************************************************************************************************************
Friday 13 January 2023  00:29:05 +0300 (0:00:03.514)       0:00:03.528 ********
ok: [host35]
ok: [host36]

TASK [Check nginx status] *******************************************************************************************************************************************************************************
Friday 13 January 2023  00:29:09 +0300 (0:00:03.617)       0:00:07.145 ********
changed: [host36]
changed: [host35]

TASK [Show nginx status] ********************************************************************************************************************************************************************************
Friday 13 January 2023  00:29:10 +0300 (0:00:01.348)       0:00:08.494 ********
ok: [host35] => {
    "msg": "nginx version: nginx/1.18.0 (Ubuntu)"
}
ok: [host36] => {
    "msg": "nginx version: nginx/1.18.0 (Ubuntu)"
}

TASK [Creating  folders for each site with owner www-data on the host35] ********************************************************************************************************************************
Friday 13 January 2023  00:29:10 +0300 (0:00:00.075)       0:00:08.569 ********
skipping: [host36]
ok: [host35]

TASK [Change owner www catalog and subfolders recursive on the host35] **********************************************************************************************************************************
Friday 13 January 2023  00:29:12 +0300 (0:00:01.382)       0:00:09.952 ********
skipping: [host36]
ok: [host35]

TASK [Creating  config file with templates on the host35] ***********************************************************************************************************************************************
Friday 13 January 2023  00:29:13 +0300 (0:00:01.215)       0:00:11.168 ********
skipping: [host36]
ok: [host35]

TASK [Creating  index.html for each sites using templates on the host35] ********************************************************************************************************************************
Friday 13 January 2023  00:29:15 +0300 (0:00:02.250)       0:00:13.418 ********
skipping: [host36]
ok: [host35]

TASK [Enable virtual host] ******************************************************************************************************************************************************************************
Friday 13 January 2023  00:29:17 +0300 (0:00:01.931)       0:00:15.350 ********
skipping: [host36]
changed: [host35]

TASK [Add record into hosts on the host36] **************************************************************************************************************************************************************
Friday 13 January 2023  00:29:18 +0300 (0:00:01.162)       0:00:16.512 ********
skipping: [host36]
changed: [host35]

TASK [Checking that you can connect (GET) to a page and it returns a status 200 on the host35] **********************************************************************************************************
Friday 13 January 2023  00:29:19 +0300 (0:00:01.115)       0:00:17.627 ********
skipping: [host36]
ok: [host35]

TASK [Creating  folders for each site with owner www-data on the host36] ********************************************************************************************************************************
Friday 13 January 2023  00:29:21 +0300 (0:00:01.483)       0:00:19.110 ********
skipping: [host35]
ok: [host36]

TASK [Change owner www catalog and subfolders recursive on the host36] **********************************************************************************************************************************
Friday 13 January 2023  00:29:22 +0300 (0:00:01.215)       0:00:20.326 ********
skipping: [host35]
ok: [host36]

TASK [Creating  config file with templates on the host36] ***********************************************************************************************************************************************
Friday 13 January 2023  00:29:23 +0300 (0:00:01.237)       0:00:21.564 ********
skipping: [host35]
ok: [host36]

TASK [Creating  index.html for each sites using templates] **********************************************************************************************************************************************
Friday 13 January 2023  00:29:25 +0300 (0:00:01.981)       0:00:23.545 ********
skipping: [host35]
ok: [host36]

TASK [Enable virtual host] ******************************************************************************************************************************************************************************
Friday 13 January 2023  00:29:27 +0300 (0:00:01.972)       0:00:25.518 ********
skipping: [host35]
changed: [host36]

TASK [Add record into hosts on the host36] **************************************************************************************************************************************************************
Friday 13 January 2023  00:29:29 +0300 (0:00:01.217)       0:00:26.736 ********
skipping: [host35]
changed: [host36]

TASK [Checking that you can connect (GET) to a page and it returns a status 200 on the host36] **********************************************************************************************************
Friday 13 January 2023  00:29:30 +0300 (0:00:01.198)       0:00:27.935 ********
skipping: [host35]
ok: [host36]

PLAY RECAP **********************************************************************************************************************************************************************************************
host35                     : ok=11   changed=3    unreachable=0    failed=0    skipped=7    rescued=0    ignored=0
host36                     : ok=11   changed=3    unreachable=0    failed=0    skipped=7    rescued=0    ignored=0

Friday 13 January 2023  00:29:31 +0300 (0:00:01.315)       0:00:29.250 ********
===============================================================================
Update the repository cache and update package "nginx" to latest version ------------------------------------------------------------------------------------------------------------------------- 3.62s
Gathering Facts ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.52s
Creating  config file with templates on the host35 ----------------------------------------------------------------------------------------------------------------------------------------------- 2.25s
Creating  config file with templates on the host36 ----------------------------------------------------------------------------------------------------------------------------------------------- 1.98s
Creating  index.html for each sites using templates ---------------------------------------------------------------------------------------------------------------------------------------------- 1.97s
Creating  index.html for each sites using templates on the host35 -------------------------------------------------------------------------------------------------------------------------------- 1.93s
Checking that you can connect (GET) to a page and it returns a status 200 on the host35 ---------------------------------------------------------------------------------------------------------- 1.48s
Creating  folders for each site with owner www-data on the host35 -------------------------------------------------------------------------------------------------------------------------------- 1.38s
Check nginx status ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.35s
Checking that you can connect (GET) to a page and it returns a status 200 on the host36 ---------------------------------------------------------------------------------------------------------- 1.32s
Change owner www catalog and subfolders recursive on the host36 ---------------------------------------------------------------------------------------------------------------------------------- 1.24s
Enable virtual host ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.22s
Creating  folders for each site with owner www-data on the host36 -------------------------------------------------------------------------------------------------------------------------------- 1.22s
Change owner www catalog and subfolders recursive on the host35 ---------------------------------------------------------------------------------------------------------------------------------- 1.22s
Add record into hosts on the host36 -------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.20s
Enable virtual host ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.16s
Add record into hosts on the host36 -------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.12s
Show nginx status -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.08s
Playbook run took 0 days, 0 hours, 0 minutes, 29 seconds
```