# 06.AnsibleWorkshop

## Result playbook

```Shell
admin1@igor:~/06_workshop$ ansible-playbook -i inv.yaml nginxPB.yaml

PLAY [db_all] **********************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************
Saturday 04 March 2023  10:19:28 +0000 (0:00:00.011)       0:00:00.011 ********
ok: [host_db]

TASK [Install packages] ************************************************************************************************
Saturday 04 March 2023  10:19:35 +0000 (0:00:06.932)       0:00:06.943 ********
ok: [host_db]

TASK [Create a directory if it does not exist] *************************************************************************
Saturday 04 March 2023  10:19:41 +0000 (0:00:06.123)       0:00:13.067 ********
ok: [host_db] => (item=site111.com)
ok: [host_db] => (item=site222.com)

TASK [Permissions] *****************************************************************************************************
Saturday 04 March 2023  10:19:48 +0000 (0:00:07.360)       0:00:20.428 ********
ok: [host_db]

TASK [Template a file to /var/www/host/html/] **************************************************************************
Saturday 04 March 2023  10:19:52 +0000 (0:00:03.518)       0:00:23.947 ********
ok: [host_db] => (item=site111.com)
ok: [host_db] => (item=site222.com)

TASK [Template a file to /etc/nginx/sites-available/host] **************************************************************
Saturday 04 March 2023  10:20:05 +0000 (0:00:13.744)       0:00:37.691 ********
ok: [host_db] => (item=site111.com)
ok: [host_db] => (item=site222.com)

TASK [Create symbolic links] *******************************************************************************************
Saturday 04 March 2023  10:20:19 +0000 (0:00:13.460)       0:00:51.152 ********
changed: [host_db] => (item=site111.com)
changed: [host_db] => (item=site222.com)

TASK [Add in hosts] ****************************************************************************************************
Saturday 04 March 2023  10:20:34 +0000 (0:00:15.087)       0:01:06.239 ********
changed: [host_db] => (item=site111.com)
changed: [host_db] => (item=site222.com)

TASK [Restart nginx] ***************************************************************************************************
Saturday 04 March 2023  10:20:41 +0000 (0:00:06.874)       0:01:13.114 ********
changed: [host_db]

TASK [Check that a page returns a status 200] **************************************************************************
Saturday 04 March 2023  10:20:48 +0000 (0:00:07.219)       0:01:20.334 ********
ok: [host_db] => (item=site111.com)
ok: [host_db] => (item=site222.com)

PLAY RECAP *************************************************************************************************************
host_db                    : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Saturday 04 March 2023  10:20:57 +0000 (0:00:08.807)       0:01:29.141 ********
===============================================================================
Create symbolic links ------------------------------------------------------------------------------------------ 15.09s
Template a file to /var/www/host/html/ ------------------------------------------------------------------------- 13.74s
Template a file to /etc/nginx/sites-available/host ------------------------------------------------------------- 13.46s
Check that a page returns a status 200 -------------------------------------------------------------------------- 8.81s
Create a directory if it does not exist ------------------------------------------------------------------------- 7.36s
Restart nginx --------------------------------------------------------------------------------------------------- 7.22s
Gathering Facts ------------------------------------------------------------------------------------------------- 6.93s
Add in hosts ---------------------------------------------------------------------------------------------------- 6.87s
Install packages ------------------------------------------------------------------------------------------------ 6.12s
Permissions ----------------------------------------------------------------------------------------------------- 3.52s
Playbook run took 0 days, 0 hours, 1 minutes, 29 seconds
```