$master_pub_key="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDXGoGuv3PslG9chM3Z9uc/j91u6ENJMaip3aNDl0fy358u8VI7mWTNnv7fu3js4WyCTzj+ae+WksdUGz7Vo5xWEoCVfMwf8ExmUrcaHnVCrMbxBPojeX1BfSiEfV4QbTMMofpn18+dZe41MRG7hrMWiHVts/LnHkJsPmNYz4gqyF6l18MM07At0Zl67uFZlxcThCFNO2usKtPSBBeOtMr6lvYlvUA0F0psD7FbKgRcyN0LAiNDHHYZ7e3RSoUmsVxt6sMexJqNJQ6TAuxdR9q/jFfHWG4EZrgQsNOoWYLL2wU0YcBO6tMqhYL6UooOp4WTPwXiDNUa5oh4tW2hMVef jenkins@localhost.localdomain"
$script = <<-SCRIPT
yum -y install java-1.8.0-openjdk git -q
useradd -d /var/lib/jenkins jenkins
sudo runuser -l jenkins -c 'echo -e "\n\n\n" | ssh-keygen -t rsa'
sudo runuser -l jenkins -c 'cat /tmp/authorized_keys >> /var/lib/jenkins/.ssh/authorized_keys'
chown jenkins:jenkins /var/lib/jenkins/.ssh/authorized_keys 
chmod 600 /var/lib/jenkins/.ssh/authorized_keys
rm -f /tmp/authorized_keys
echo "Client done!"
SCRIPT

Vagrant.configure("2") do |config|
	config.vm.box = "centos/7"
	config.vm.define "Jenkins_node"
	config.vm.network "private_network", ip: "192.168.6.13", virtualbox__intnet: "intnet"
	config.vm.provision "file", 
		source: "authorized_keys", 
		destination: "/tmp/authorized_keys"
	config.vm.provision "shell",
		inline: $script
end
