## Inventory yaml file (inv.yaml)
```
        ---
        all_hosts:
          hosts:
            redmine:
              ansible_user: root
              ansible_host: 192.168.31.16
```

## Modify file ~/.ssh/config with Host Bastion section
```
        #####################################
        Host Bastion
                User jump_sa
                HostName 178.124.206.48
        Host 192.168.254.* 192.168.31.*
                ProxyJump Bastion
        ######################################

```

## Adde ssh public key for user root on host 192.168.31.16
```
        ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.31.16
```

## Check host 192.168.31.16
```
        ansible redmine -i inv.yaml -m ping
        redmine | SUCCESS => {
            "ansible_facts": {
                "discovered_interpreter_python": "/usr/bin/python"
            }, 
            "changed": false, 
            "ping": "pong"
        }
```

##  Deployment of application
```
        kristoit@M-SA2-Ubuntu:~/ansi/09$ ansible-playbook -i inv.yaml start.yaml --skip-tags setup

        PLAY [redmine] *******************************************************************************************************************************************************

        TASK [Gathering Facts] ***********************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:30 +0300 (0:00:00.068)       0:00:00.068 *** 
        ok: [redmine]

        TASK [redmine : apt | update repository cache] ***********************************************************************************************************************
        Wednesday 11 September 2019  08:56:33 +0300 (0:00:03.267)       0:00:03.336 *** 
        [WARNING]: Could not find aptitude. Using apt-get instead

        ok: [redmine]

        TASK [redmine : Redmine. Install packages] ***************************************************************************************************************************
        Wednesday 11 September 2019  08:56:36 +0300 (0:00:02.611)       0:00:05.948 *** 
        ok: [redmine]

        TASK [redmine : template] ********************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:37 +0300 (0:00:01.208)       0:00:07.156 *** 
        ok: [redmine]

        TASK [redmine : service] *********************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:39 +0300 (0:00:01.787)       0:00:08.944 *** 
        ok: [redmine]

        TASK [redmine : mysql_db] ********************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:40 +0300 (0:00:01.732)       0:00:10.676 *** 
        ok: [redmine]

        TASK [redmine : mysql_user] ******************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:41 +0300 (0:00:01.062)       0:00:11.739 *** 
        ok: [redmine]

        TASK [redmine : Redmine. Clone repository] ***************************************************************************************************************************
        Wednesday 11 September 2019  08:56:42 +0300 (0:00:01.103)       0:00:12.842 *** 
        ok: [redmine]

        TASK [redmine : Redmine. Change permissions] *************************************************************************************************************************
        Wednesday 11 September 2019  08:56:45 +0300 (0:00:03.012)       0:00:15.855 *** 
        ok: [redmine]

        TASK [redmine : Redmine. Change permissions] *************************************************************************************************************************
        Wednesday 11 September 2019  08:56:46 +0300 (0:00:00.767)       0:00:16.623 *** 
        ok: [redmine]

        TASK [redmine : Config database] *************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:47 +0300 (0:00:00.654)       0:00:17.278 *** 
        ok: [redmine]

        TASK [redmine : Session store secret generation] *********************************************************************************************************************
        Wednesday 11 September 2019  08:56:48 +0300 (0:00:01.046)       0:00:18.324 *** 
        ok: [redmine]

        TASK [redmine : Configuration files for virtualhost] *****************************************************************************************************************
        Wednesday 11 September 2019  08:56:49 +0300 (0:00:00.960)       0:00:19.285 *** 
        ok: [redmine]

        TASK [redmine : apache_restart] **************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:50 +0300 (0:00:00.991)       0:00:20.276 *** 
        changed: [redmine]

        TASK [redmine : Add redmine.example.com to host file] ****************************************************************************************************************
        Wednesday 11 September 2019  08:56:53 +0300 (0:00:03.213)       0:00:23.490 *** 
        changed: [redmine]

        TASK [redmine : uri] *************************************************************************************************************************************************
        Wednesday 11 September 2019  08:56:54 +0300 (0:00:00.652)       0:00:24.143 *** 
        ok: [redmine]

        TASK [redmine : lineinfile] ******************************************************************************************************************************************
        Wednesday 11 September 2019  08:57:00 +0300 (0:00:06.170)       0:00:30.313 *** 
        changed: [redmine]

        PLAY RECAP ***********************************************************************************************************************************************************
        redmine                    : ok=17   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

        Wednesday 11 September 2019  08:57:01 +0300 (0:00:00.999)       0:00:31.313 *** 
        =============================================================================== 
        redmine : uri ------------------------------------------------------------------------------------------------------------------------------------------------- 6.17s
        Gathering Facts ----------------------------------------------------------------------------------------------------------------------------------------------- 3.27s
        redmine : apache_restart -------------------------------------------------------------------------------------------------------------------------------------- 3.21s
        redmine : Redmine. Clone repository --------------------------------------------------------------------------------------------------------------------------- 3.01s
        redmine : apt | update repository cache ----------------------------------------------------------------------------------------------------------------------- 2.61s
        redmine : template -------------------------------------------------------------------------------------------------------------------------------------------- 1.79s
        redmine : service --------------------------------------------------------------------------------------------------------------------------------------------- 1.73s
        redmine : Redmine. Install packages --------------------------------------------------------------------------------------------------------------------------- 1.21s
        redmine : mysql_user ------------------------------------------------------------------------------------------------------------------------------------------ 1.10s
        redmine : mysql_db -------------------------------------------------------------------------------------------------------------------------------------------- 1.06s
        redmine : Config database ------------------------------------------------------------------------------------------------------------------------------------- 1.05s
        redmine : lineinfile ------------------------------------------------------------------------------------------------------------------------------------------ 1.00s
        redmine : Configuration files for virtualhost ----------------------------------------------------------------------------------------------------------------- 0.99s
        redmine : Session store secret generation --------------------------------------------------------------------------------------------------------------------- 0.96s
        redmine : Redmine. Change permissions ------------------------------------------------------------------------------------------------------------------------- 0.77s
        redmine : Redmine. Change permissions ------------------------------------------------------------------------------------------------------------------------- 0.65s
        redmine : Add redmine.example.com to host file ---------------------------------------------------------------------------------------------------------------- 0.65s
        kristoit@M-SA2-Ubuntu:~/ansi/09$ 
```
## Setup SSH Tunnel With PuTTY

* Create and save SSH connect to Bastion host

![alt text](https://i.ibb.co/3yVPZLB/1-Bastion.gif "Create SSH connect to Bastion host")

* Configure Tunnel

![alt text](https://i.ibb.co/6WT7gBJ/2-Configure-Tunnel.gif "Configure Tunnel")

* Open Tunnel

![alt text](https://i.ibb.co/VMFG49j/3-Open-Tunnel.gif "Open Tunnel")

## Modify file C:\Windows\System32\drivers\etc\hosts
```
Adde record 127.0.0.1 redmine.example.com
```

## Run browser and open Redmine page http://redmine.example.com:50080/

![alt text](https://i.ibb.co/yPtmGYG/1-Redmine.gif "Open Redmine")

## Project created
![alt text](https://i.ibb.co/bgBdksh/2-Project-Created.gif "Project created")
